<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head><script src="/xuanyu/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=xuanyu/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="canonical" type="text/html" href="http://localhost:1313/xuanyu/docs/usage/">
<link rel="alternate" type="application/rss&#43;xml" href="http://localhost:1313/xuanyu/docs/usage/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/xuanyu/favicons/favicon.ico" >
<link rel="apple-touch-icon" sizes="57x57" href="/xuanyu/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/xuanyu/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/xuanyu/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/xuanyu/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/xuanyu/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/xuanyu/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/xuanyu/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/xuanyu/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/xuanyu/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/xuanyu/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/xuanyu/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/xuanyu/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/xuanyu/favicons/favicon-16x16.png">
<link rel="manifest" href="/xuanyu/favicons/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/xuanyu/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<title>Usage | Goldydocs</title>
<meta name="description" content="A Docsy example site">
<meta property="og:url" content="http://localhost:1313/xuanyu/docs/usage/">
  <meta property="og:site_name" content="Goldydocs">
  <meta property="og:title" content="Usage">
  <meta property="og:description" content="A Docsy example site">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="Usage">
  <meta itemprop="description" content="A Docsy example site">
  <meta itemprop="datePublished" content="2017-01-05T00:00:00+00:00">
  <meta itemprop="dateModified" content="2017-01-05T00:00:00+00:00">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Usage">
  <meta name="twitter:description" content="A Docsy example site">
<link href="/xuanyu/scss/main.css" rel="stylesheet">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>

  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/xuanyu/"><span class="navbar-brand__logo navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="Layer_1" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512"><path style="fill:#0084ff" d="M256 10.449C120.275 10.449 10.449 120.276 10.449 256c0 135.725 109.826 245.551 245.551 245.551S501.551 391.725 501.551 256C501.551 120.276 391.725 10.449 256 10.449z"/><path style="fill:#fff" d="M256 168.229c-48.515.0-87.771 39.257-87.771 87.771s39.257 87.771 87.771 87.771 87.771-39.257 87.771-87.771S304.515 168.229 256 168.229z"/><path d="M437.061 74.94C388.735 26.615 324.434.0 256 0S123.265 26.615 74.939 74.94.0 187.566.0 256s26.614 132.735 74.939 181.061S187.566 512 256 512s132.735-26.614 181.061-74.939S512 324.434 512 256 485.386 123.266 437.061 74.94zM256 491.102C126.365 491.102 20.898 385.635 20.898 256S126.365 20.898 256 20.898 491.102 126.365 491.102 256 385.635 491.102 256 491.102z"/><path d="M354.22 256c0-54.158-44.061-98.22-98.22-98.22s-98.22 44.062-98.22 98.22 44.062 98.22 98.22 98.22 98.22-44.061 98.22-98.22zm-175.542.0c0-42.636 34.686-77.322 77.322-77.322s77.322 34.686 77.322 77.322S298.636 333.322 256 333.322 178.678 298.636 178.678 256z"/><path d="M285.257 256c0-16.132-13.124-29.257-29.257-29.257S226.743 239.868 226.743 256s13.125 29.257 29.257 29.257S285.257 272.133 285.257 256zm-37.616.0c0-4.609 3.75-8.359 8.359-8.359 4.609.0 8.359 3.75 8.359 8.359.0 4.609-3.75 8.359-8.359 8.359C251.391 264.359 247.641 260.609 247.641 256z"/><path d="M256 391.837c-5.771.0-10.449 4.678-10.449 10.449s4.678 10.449 10.449 10.449c41.897.0 81.265-16.294 110.853-45.883 29.587-29.587 45.881-68.955 45.881-110.852.0-5.771-4.678-10.449-10.449-10.449s-10.449 4.678-10.449 10.449C391.837 330.9 330.9 391.837 256 391.837z"/><path d="M449.306 245.551c-5.771.0-10.449 4.678-10.449 10.449.0 1.481-.018 2.958-.052 4.43-.136 5.769 4.43 10.557 10.199 10.692.085.002.168.003.252.003 5.656.0 10.307-4.517 10.442-10.202.039-1.637.059-3.279.059-4.925C459.755 250.229 455.077 245.551 449.306 245.551z"/><path d="M447.55 284.239c-5.656-1.145-11.168 2.52-12.308 8.178-17.107 84.854-92.489 146.44-179.242 146.44-5.771.0-10.449 4.678-10.449 10.449s4.678 10.449 10.449 10.449c47.353.0 93.467-16.573 129.847-46.668 35.9-29.697 60.717-71.084 69.881-116.54C456.868 290.891 453.207 285.38 447.55 284.239z"/><path d="M256 120.163c5.771.0 10.449-4.678 10.449-10.449S261.771 99.265 256 99.265c-41.897.0-81.265 16.294-110.853 45.883C115.559 174.735 99.265 214.103 99.265 256c0 5.771 4.678 10.449 10.449 10.449s10.449-4.678 10.449-10.449c0-74.9 60.937-135.837 135.837-135.837z"/><path d="M62.996 240.876c-5.759-.14-10.557 4.43-10.692 10.199-.039 1.637-.059 3.279-.059 4.925.0 5.771 4.678 10.449 10.449 10.449S73.143 261.771 73.143 256c0-1.481.018-2.958.052-4.43C73.331 245.8 68.765 241.013 62.996 240.876z"/><path d="M256 73.143c5.771.0 10.449-4.678 10.449-10.449S261.771 52.245 256 52.245c-47.353.0-93.467 16.573-129.847 46.668-35.9 29.697-60.717 71.084-69.881 116.54-1.14 5.657 2.521 11.168 8.178 12.308.697.141 1.392.208 2.076.208 4.872.0 9.232-3.426 10.232-8.386C93.864 134.729 169.247 73.143 256 73.143z"/></svg></span><span class="navbar-brand__name">Goldydocs</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="/xuanyu/docs/"><span>Documentation</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/xuanyu/offline-search-index.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/xuanyu/docs/usage/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Usage</h1>





    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-72deeb62a3d1ec4389e154e783b58a85">Navidrome Configuration Options</a></li>


    
  
    
    
	
<li>2: <a href="#pg-36afcf574ea711ce24b9ded084e5cff6">Artwork location resolution</a></li>


    
  
    
    
	
<li>3: <a href="#pg-cc434e92e48e7fd7a9073a1b6d51c76d">External Integrations</a></li>


    
  
    
    
	
<li>4: <a href="#pg-5308194cccb21f64d0bbf925160cc6e3">Sharing</a></li>


    
  
    
    
	
<li>5: <a href="#pg-6d888317d8891e9ba024283a583e0468">Monitoring Navidrome</a></li>


    
  
    
    
	
<li>6: <a href="#pg-6638163e10c0e4124f33547c097c90d7">Jukebox mode</a></li>


    
  
    
    
	
<li>7: <a href="#pg-ee00a05be038cb0ea8b5956df19aa915">Metadata Extractors</a></li>


    
  
    
    
	
<li>8: <a href="#pg-0ae36053267aa4fa38e12a6540f071f1">Security Considerations</a></li>


    
  
    
    
	
<li>9: <a href="#pg-294f17907a2250dcd109d8c7b7ceed5f">Troubleshooting</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-72deeb62a3d1ec4389e154e783b58a85">1 - Navidrome Configuration Options</h1>
    <div class="lead">How to customize Navidrome to your environment</div>
	<p>Navidrome allows some customization using environment variables, loading from a configuration file
or using command line arguments.</p>
<h2 id="configuration-file">Configuration File</h2>
<p>Navidrome tries to load the configuration from a <code>navidrome.toml</code> file in the current working
directory, if it exists. You can create this file and put any of the <a href="/xuanyu/docs/usage/configuration-options/#available-options">configuration options below</a>
in it. Example of a configuration file (select your OS):</p>





<ul class="nav nav-tabs" id="tabs-0" role="tablist">
  <li class="nav-item">
      <button class="nav-link disabled"
          id="tabs-00-00-tab" data-bs-toggle="tab" data-bs-target="#tabs-00-00" role="tab"
          aria-controls="tabs-00-00" aria-selected="false">
        <strong>Example</strong>:
      </button>
    </li><li class="nav-item">
      <button class="nav-link active"
          id="tabs-00-01-tab" data-bs-toggle="tab" data-bs-target="#tabs-00-01" role="tab"
          data-td-tp-persist="windows" aria-controls="tabs-00-01" aria-selected="true">
        Windows
      </button>
    </li><li class="nav-item">
      <button class="nav-link"
          id="tabs-00-02-tab" data-bs-toggle="tab" data-bs-target="#tabs-00-02" role="tab"
          data-td-tp-persist="macos" aria-controls="tabs-00-02" aria-selected="false">
        macOS
      </button>
    </li><li class="nav-item">
      <button class="nav-link"
          id="tabs-00-03-tab" data-bs-toggle="tab" data-bs-target="#tabs-00-03" role="tab"
          data-td-tp-persist="unix" aria-controls="tabs-00-03" aria-selected="false">
        Unix-based systems
      </button>
    </li>
</ul>

<div class="tab-content" id="tabs-0-content">
    <div class="tab-pane fade"
        id="tabs-00-00" role="tabpanel" aria-labelled-by="tabs-00-00-tab" tabindex="0">
        <pre tabindex="0"><code></code></pre>
    </div>
    <div class="tab-pane fade show active"
        id="tabs-00-01" role="tabpanel" aria-labelled-by="tabs-00-01-tab" tabindex="0">
        <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span># This is just an example! Please see available options to customize Navidrome for your needs at
</span></span><span style="display:flex;"><span># https://www.navidrome.org/docs/usage/configuration-options/#available-options
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>LogLevel = &#39;DEBUG&#39;
</span></span><span style="display:flex;"><span>ScanSchedule = &#39;@every 24h&#39;
</span></span><span style="display:flex;"><span>TranscodingCacheSize = &#39;150MiB&#39;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># IMPORTANT: Use single quotes for paths in Windows
</span></span><span style="display:flex;"><span>MusicFolder = &#39;C:\Users\JohnDoe\Music&#39;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># Set this to the path of your ffmpeg executable
</span></span><span style="display:flex;"><span>FFmpegPath = &#39;C:\Program Files\ffmpeg\bin\ffmpeg.exe&#39;</span></span></code></pre></div>
    </div>
    <div class="tab-pane fade"
        id="tabs-00-02" role="tabpanel" aria-labelled-by="tabs-00-02-tab" tabindex="0">
        <pre tabindex="0"><code class="language-macos" data-lang="macos"># This is just an example! Please see available options to customize Navidrome for your needs at
# https://www.navidrome.org/docs/usage/configuration-options/#available-options

LogLevel = &#39;DEBUG&#39;
ScanSchedule = &#39;@every 24h&#39;
TranscodingCacheSize = &#39;150MiB&#39;
MusicFolder = &#39;/Users/JohnDoe/Music&#39;

# This is the default path for Homebrew installed ffmpeg
FFmpegPath = &#39;/usr/local/bin/ffmpeg&#39;</code></pre>
    </div>
    <div class="tab-pane fade"
        id="tabs-00-03" role="tabpanel" aria-labelled-by="tabs-00-03-tab" tabindex="0">
        <pre tabindex="0"><code class="language-unix" data-lang="unix"># This is just an example! Please see available options to customize Navidrome for your needs at
# https://www.navidrome.org/docs/usage/configuration-options/#available-options

LogLevel = &#39;DEBUG&#39;
ScanSchedule = &#39;@every 24h&#39;
TranscodingCacheSize = &#39;150MiB&#39;
MusicFolder = &#39;/mnt/music&#39;</code></pre>
    </div>
</div>

<p>You can also specify a different path for the configuration file, using the <code>-c/--configfile</code> option.
Navidrome can load the configuration from <code>toml</code>, <code>json</code>, <code>yml</code> and <code>ini</code> files.</p>
<p>The example below assume you have created a <code>navidrome.toml</code> file in your home directory:</p>





<ul class="nav nav-tabs" id="tabs-1" role="tablist">
  <li class="nav-item">
      <button class="nav-link disabled"
          id="tabs-01-00-tab" data-bs-toggle="tab" data-bs-target="#tabs-01-00" role="tab"
          aria-controls="tabs-01-00" aria-selected="false">
        <strong>Example</strong>:
      </button>
    </li><li class="nav-item">
      <button class="nav-link active"
          id="tabs-01-01-tab" data-bs-toggle="tab" data-bs-target="#tabs-01-01" role="tab"
          data-td-tp-persist="windows" aria-controls="tabs-01-01" aria-selected="true">
        Windows
      </button>
    </li><li class="nav-item">
      <button class="nav-link"
          id="tabs-01-02-tab" data-bs-toggle="tab" data-bs-target="#tabs-01-02" role="tab"
          data-td-tp-persist="macos" aria-controls="tabs-01-02" aria-selected="false">
        macOs
      </button>
    </li><li class="nav-item">
      <button class="nav-link"
          id="tabs-01-03-tab" data-bs-toggle="tab" data-bs-target="#tabs-01-03" role="tab"
          data-td-tp-persist="unix" aria-controls="tabs-01-03" aria-selected="false">
        Unix-based systems
      </button>
    </li>
</ul>

<div class="tab-content" id="tabs-1-content">
    <div class="tab-pane fade"
        id="tabs-01-00" role="tabpanel" aria-labelled-by="tabs-01-00-tab" tabindex="1">
        <pre tabindex="0"><code></code></pre>
    </div>
    <div class="tab-pane fade show active"
        id="tabs-01-01" role="tabpanel" aria-labelled-by="tabs-01-01-tab" tabindex="1">
        <pre tabindex="0"><code class="language-windows" data-lang="windows">C:\&gt; navidrome --configfile &#34;c:\User\JohnDoe\navidrome.toml&#34;</code></pre>
    </div>
    <div class="tab-pane fade"
        id="tabs-01-02" role="tabpanel" aria-labelled-by="tabs-01-02-tab" tabindex="1">
        <pre tabindex="0"><code class="language-macos" data-lang="macos">$ navidrome --configfile &#34;/User/JohnDoe/navidrome.toml&#34;</code></pre>
    </div>
    <div class="tab-pane fade"
        id="tabs-01-03" role="tabpanel" aria-labelled-by="tabs-01-03-tab" tabindex="1">
        <pre tabindex="0"><code class="language-unix" data-lang="unix">$ navidrome --configfile &#34;/home/johndoe/navidrome.toml&#34;</code></pre>
    </div>
</div>

<h2 id="command-line-arguments">Command Line Arguments</h2>
<p>You can set most of the <a href="/xuanyu/docs/usage/configuration-options/#available-options">config options below</a> passing arguments to <code>navidrome</code> executable.</p>
<p>The example below shows how to set the <code>MusicFolder</code> using the command line, assuming you have your music library
under your home directory:</p>





<ul class="nav nav-tabs" id="tabs-2" role="tablist">
  <li class="nav-item">
      <button class="nav-link disabled"
          id="tabs-02-00-tab" data-bs-toggle="tab" data-bs-target="#tabs-02-00" role="tab"
          aria-controls="tabs-02-00" aria-selected="false">
        <strong>Example</strong>:
      </button>
    </li><li class="nav-item">
      <button class="nav-link active"
          id="tabs-02-01-tab" data-bs-toggle="tab" data-bs-target="#tabs-02-01" role="tab"
          data-td-tp-persist="windows" aria-controls="tabs-02-01" aria-selected="true">
        Windows
      </button>
    </li><li class="nav-item">
      <button class="nav-link"
          id="tabs-02-02-tab" data-bs-toggle="tab" data-bs-target="#tabs-02-02" role="tab"
          data-td-tp-persist="macos" aria-controls="tabs-02-02" aria-selected="false">
        macOs
      </button>
    </li><li class="nav-item">
      <button class="nav-link"
          id="tabs-02-03-tab" data-bs-toggle="tab" data-bs-target="#tabs-02-03" role="tab"
          data-td-tp-persist="unix" aria-controls="tabs-02-03" aria-selected="false">
        Unix-based systems
      </button>
    </li>
</ul>

<div class="tab-content" id="tabs-2-content">
    <div class="tab-pane fade"
        id="tabs-02-00" role="tabpanel" aria-labelled-by="tabs-02-00-tab" tabindex="2">
        <pre tabindex="0"><code></code></pre>
    </div>
    <div class="tab-pane fade show active"
        id="tabs-02-01" role="tabpanel" aria-labelled-by="tabs-02-01-tab" tabindex="2">
        <pre tabindex="0"><code class="language-windows" data-lang="windows">C:\&gt; navidrome --musicfolder &#34;c:\User\JohnDoe\Music&#34;</code></pre>
    </div>
    <div class="tab-pane fade"
        id="tabs-02-02" role="tabpanel" aria-labelled-by="tabs-02-02-tab" tabindex="2">
        <pre tabindex="0"><code class="language-macos" data-lang="macos">$ navidrome --musicfolder &#34;/User/JohnDoe/Music&#34;</code></pre>
    </div>
    <div class="tab-pane fade"
        id="tabs-02-03" role="tabpanel" aria-labelled-by="tabs-02-03-tab" tabindex="2">
        <pre tabindex="0"><code class="language-unix" data-lang="unix">$ navidrome --musicfolder &#34;/mnt/music&#34;</code></pre>
    </div>
</div>

<p>Please note that command line arguments must be <strong>all lowercase</strong>. For a list of all available command line options,
just call <code>navidrome --help</code>.</p>
<h2 id="environment-variables">Environment Variables</h2>
<p>Any configuration option can be set as an environment variable, just add a the prefix <code>ND_</code> and
make it all uppercase. Ex: <code>ND_LOGLEVEL=debug</code>. See below for all available options</p>
<h2 id="available-options">Available Options</h2>
<h3 id="basic-configuration">Basic configuration</h3>
<table>
<thead>
<tr>
<th>In config file</th>
<th>As an env var</th>
<th>Description</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>ND_CONFIGFILE</code></td>
<td>Load configurations from an external config file</td>
<td><code>&quot;./navidrome.toml&quot;</code></td>
</tr>
<tr>
<td>MusicFolder</td>
<td><code>ND_MUSICFOLDER</code></td>
<td>Folder where your music library is stored. Can be read-only</td>
<td><code>&quot;./music&quot;</code></td>
</tr>
<tr>
<td>DataFolder</td>
<td><code>ND_DATAFOLDER</code></td>
<td>Folder to store application data (DB)</td>
<td><code>&quot;./data&quot;</code></td>
</tr>
<tr>
<td>CacheFolder</td>
<td><code>ND_CACHEFOLDER</code></td>
<td>Folder to store cache data (transcoding, images&hellip;)</td>
<td><code>&quot;&lt;DataFolder&gt;/cache&quot;</code></td>
</tr>
<tr>
<td>LogLevel</td>
<td><code>ND_LOGLEVEL</code></td>
<td>Log level. Useful for troubleshooting. Possible values: <code>error</code>, <code>warn</code>, <code>info</code>, <code>debug</code>, <code>trace</code></td>
<td><code>&quot;info&quot;</code></td>
</tr>
<tr>
<td>Address</td>
<td><code>ND_ADDRESS</code></td>
<td>Address the server will bind to. Can be an IPv4 or IPv6. Also supports <code>unix:/path/to/file</code> for Unix socket files</td>
<td><code>0.0.0.0</code> and <code>::</code> (all IPs)</td>
</tr>
<tr>
<td>BaseUrl</td>
<td><code>ND_BASEURL</code></td>
<td>Base URL to configure Navidrome behind a proxy (examples: <code>/music</code>, <code>https://music.example.com</code>)</td>
<td><em>Empty</em></td>
</tr>
<tr>
<td>Port</td>
<td><code>ND_PORT</code></td>
<td>HTTP port Navidrome will use</td>
<td><code>4533</code></td>
</tr>
</tbody>
</table>
<h3 id="advanced-configuration">Advanced configuration</h3>
<!-- This table is easier to be edited when Word Wrap is toggled off. Please keep it sorted -->
<table>
<thead>
<tr>
<th>In config file</th>
<th>As an environment variable</th>
<th>Description</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>AlbumPlayCountMode</td>
<td><code>ND_ALBUMPLAYCOUNTMODE</code></td>
<td>Change how album play count is computed. When set to <code>&quot;normalized&quot;</code>, album play count will be divided by the number of album tracks</td>
<td><code>&quot;absolute&quot;</code></td>
</tr>
<tr>
<td>AuthRequestLimit<a href="/xuanyu/docs/usage/security/#limit-login-attempts" title="Login Limit Rating">*</a></td>
<td><code>ND_AUTHREQUESTLIMIT</code></td>
<td>How many login requests can be processed from a single IP during the <code>AuthWindowLength</code>. Set to <code>0</code> to disable the limit rater</td>
<td><code>5</code></td>
</tr>
<tr>
<td>AuthWindowLength<a href="/xuanyu/docs/usage/security/#limit-login-attempts" title="Login Limit Rating">*</a></td>
<td><code>ND_AUTHWINDOWLENGTH</code></td>
<td>Window Length for the authentication rate limit</td>
<td><code>&quot;20s&quot;</code></td>
</tr>
<tr>
<td>AutoImportPlaylists</td>
<td><code>ND_AUTOIMPORTPLAYLISTS</code></td>
<td>Enable/disable <code>.m3u</code> playlist auto-import</td>
<td><code>true</code></td>
</tr>
<tr>
<td>DefaultPlaylistPublicVisibility</td>
<td><code>ND_DEFAULTPLAYLISTPUBLICVISIBILITY</code></td>
<td>Set imported playlists as public by default</td>
<td><code>false</code></td>
</tr>
<tr>
<td>ArtistArtPriority<a href="/xuanyu/docs/usage/artwork/#artists">*</a></td>
<td><code>ND_ARTISTARTPRIORITY</code></td>
<td>Configure the order to look for artist images.</td>
<td><code>artist.*, album/artist.*, external</code></td>
</tr>
<tr>
<td>CoverArtPriority<a href="/xuanyu/docs/usage/artwork/#albums">*</a></td>
<td><code>ND_COVERARTPRIORITY</code></td>
<td>Configure the order to look for cover art images. Use special <code>embedded</code> value to get embedded images from the audio files</td>
<td><code>cover.*, folder.*, front.*, embedded, external</code></td>
</tr>
<tr>
<td>CoverJpegQuality</td>
<td><code>ND_COVERJPEGQUALITY</code></td>
<td>Set JPEG quality percentage for resized cover art images</td>
<td><code>75</code></td>
</tr>
<tr>
<td>DefaultDownsamplingFormat</td>
<td><code>ND_DEFAULTDOWNSAMPLINGFORMAT</code></td>
<td>Format to transcode to when client requests downsampling (specify maxBitrate without a format)</td>
<td><code>opus</code></td>
</tr>
<tr>
<td>DefaultLanguage</td>
<td><code>ND_DEFAULTLANGUAGE</code></td>
<td>Sets the default language used by the UI when logging in from a new browser. This value must match one of the file names in the <a href="https://github.com/navidrome/navidrome/tree/master/resources/i18n">resources/i18n</a>. Ex: for Chinese Simplified it has to be <code>zh-Hans</code> (case sensitive)</td>
<td><code>&quot;en&quot;</code></td>
</tr>
<tr>
<td>DefaultTheme</td>
<td><code>ND_DEFAULTTHEME</code></td>
<td>Sets the default theme used by the UI when logging in from a new browser. This value must match one of the options in the UI</td>
<td><code>Dark</code></td>
</tr>
<tr>
<td>EnableArtworkPrecache</td>
<td><code>ND_ENABLEARTWORKPRECACHE</code></td>
<td>Enable image pre-caching of new added music</td>
<td><code>true</code></td>
</tr>
<tr>
<td>EnableCoverAnimation</td>
<td><code>ND_ENABLECOVERANIMATION</code></td>
<td>Controls whether the player in the UI will animate the album cover (rotation)</td>
<td><code>true</code></td>
</tr>
<tr>
<td>EnableDownloads</td>
<td><code>ND_ENABLEDOWNLOADS</code></td>
<td>Enable the option in the UI to download music/albums/artists/playlists from the server</td>
<td><code>true</code></td>
</tr>
<tr>
<td>EnableExternalServices</td>
<td><code>ND_ENABLEEXTERNALSERVICES</code>.</td>
<td>Set this to <code>false</code> to completely disable ALL external integrations</td>
<td><code>true</code></td>
</tr>
<tr>
<td>EnableFavourites</td>
<td><code>ND_ENABLEFAVOURITES</code></td>
<td>Enable toggling &ldquo;Heart&rdquo;/&ldquo;Loved&rdquo; for songs/albums/artists in the UI (maps to &ldquo;Star&rdquo;/&ldquo;Starred&rdquo; in Subsonic Clients)</td>
<td><code>true</code></td>
</tr>
<tr>
<td>EnableGravatar</td>
<td><code>ND_ENABLEGRAVATAR</code></td>
<td>Use <a href="https://gravatar.com/">Gravatar</a> images as the user profile image. Needs the user&rsquo;s email to be filled</td>
<td><code>false</code></td>
</tr>
<tr>
<td>EnableLogRedacting</td>
<td><code>ND_ENABLELOGREDACTING</code></td>
<td>Whether or not sensitive information (like tokens and passwords) should be redacted (hidden) in the logs</td>
<td><code>true</code></td>
</tr>
<tr>
<td>EnableMediaFileCoverArt<a href="/xuanyu/docs/usage/artwork/#mediafiles">*</a></td>
<td><code>ND_ENABLEMEDIAFILECOVERART</code></td>
<td>If set to false, it will return the album CoverArt when a song CoverArt is requested</td>
<td><code>true</code></td>
</tr>
<tr>
<td>EnableReplayGain</td>
<td><code>ND_ENABLEREPLAYGAIN</code></td>
<td>Enable ReplayGain options in the UI</td>
<td><code>true</code></td>
</tr>
<tr>
<td>EnableSharing</td>
<td><code>ND_ENABLESHARING</code></td>
<td>Enable the Sharing feature</td>
<td><code>false</code></td>
</tr>
<tr>
<td>EnableStarRating</td>
<td><code>ND_ENABLESTARRATING</code></td>
<td>Enable 5-star ratings in the UI</td>
<td><code>true</code></td>
</tr>
<tr>
<td>EnableTranscodingConfig<a href="/xuanyu/docs/usage/security/#transcoding-configuration" title="Transcoding configuration">*</a></td>
<td><code>ND_ENABLETRANSCODINGCONFIG</code></td>
<td>Enables transcoding configuration in the UI</td>
<td><code>false</code></td>
</tr>
<tr>
<td>EnableUserEditing</td>
<td><code>ND_ENABLEUSEREDITING</code></td>
<td>Enable regular users to edit their details and change their password</td>
<td><code>true</code></td>
</tr>
<tr>
<td>FFmpegPath</td>
<td><code>ND_FFMPEGPATH</code></td>
<td>Path to <code>ffmpeg</code> executable. Use it when Navidrome cannot find it, or you want to use a specific version</td>
<td><em>Empty</em> (search in the PATH)</td>
</tr>
<tr>
<td>GATrackingID</td>
<td><code>ND_GATRACKINGID</code></td>
<td>Send basic info to your own Google Analytics account. Must be in the format <code>UA-XXXXXXXX</code></td>
<td><em>Empty</em> (disabled)</td>
</tr>
<tr>
<td>HTTPSecurityHeaders.CustomFrameOptionsValue</td>
<td><code>ND_HTTPSECURITYHEADERS_CUSTOMFRAMEOPTIONSVALUE</code></td>
<td>Allows the <code>X-Frame-Options</code> header value to be set with a custom value. Ex: <code>&quot;SAMEORIGIN&quot;</code></td>
<td><code>&quot;DENY&quot;</code></td>
</tr>
<tr>
<td>IgnoredArticles</td>
<td><code>ND_IGNOREDARTICLES</code></td>
<td>List of ignored articles when sorting/indexing artists</td>
<td><code>&quot;The El La Los Las Le Les Os As O A&quot;</code></td>
</tr>
<tr>
<td>ImageCacheSize</td>
<td><code>ND_IMAGECACHESIZE</code></td>
<td>Size of image (art work) cache. Set to <code>&quot;0&quot;</code> to disable cache</td>
<td><code>&quot;100MB&quot;</code></td>
</tr>
<tr>
<td>Jukebox.Enabled</td>
<td><code>ND_JUKEBOX_ENABLED</code></td>
<td>Enable Jukebox mode (play audio on server&rsquo;s hardware) Click <a href="/xuanyu/docs/usage/jukebox/">here</a> for details</td>
<td><code>false</code></td>
</tr>
<tr>
<td>Jukebox.AdminOnly</td>
<td><code>ND_JUKEBOX_ADMINONLY</code></td>
<td>By default, Jukebox mode is only available to Admins. Set this option to <code>false</code> to allow any valid user to control it</td>
<td><code>true</code></td>
</tr>
<tr>
<td>Jukebox.Devices</td>
<td><em>(cannot be set as an environment variable)</em></td>
<td>List of devices that can be used by the Jukebox. Click <a href="/xuanyu/docs/usage/jukebox/#configuration">here</a> for details</td>
<td><em>Empty</em> (auto detect)</td>
</tr>
<tr>
<td>Jukebox.Default</td>
<td><code>ND_JUKEBOX_DEFAULT</code></td>
<td>Device to use for Jukebox mode, if there are multiple Jukebox.Devices entries. Click <a href="/xuanyu/docs/usage/jukebox/#configuration">here</a> for details</td>
<td><em>Empty</em> (auto detect)</td>
</tr>
<tr>
<td>LastFM.Enabled</td>
<td><code>ND_LASTFM_ENABLED</code></td>
<td>Set this to <code>false</code> to completely disable Last.fm integration</td>
<td><code>true</code></td>
</tr>
<tr>
<td>LastFM.ApiKey<a href="/xuanyu/docs/usage/external-integrations/#lastfm">*</a></td>
<td><code>ND_LASTFM_APIKEY</code></td>
<td>Last.fm API Key</td>
<td><em>Empty</em></td>
</tr>
<tr>
<td>LastFM.Secret<a href="/xuanyu/docs/usage/external-integrations/#lastfm">*</a></td>
<td><code>ND_LASTFM_SECRET</code></td>
<td>Last.fm API Secret</td>
<td><em>Empty</em></td>
</tr>
<tr>
<td>LastFM.Language</td>
<td><code>ND_LASTFM_LANGUAGE</code></td>
<td><a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes" title="List of language codes">Two letter-code for language</a> to be used to retrieve biographies from Last.fm</td>
<td><code>&quot;en&quot;</code></td>
</tr>
<tr>
<td>ListenBrainz.BaseURL</td>
<td><code>ND_LISTENBRAINZ_BASEURL</code></td>
<td>Set this to override the default ListenBrainz base URL (useful with self-hosted solutions like Maloja<a href="https://github.com/krateng/maloja">*</a></td>
<td><code>https://api.listenbrainz.org/1/</code></td>
</tr>
<tr>
<td>ListenBrainz.Enabled</td>
<td><code>ND_LISTENBRAINZ_ENABLED</code></td>
<td>Set this to <code>false</code> to completely disable ListenBrainz integration</td>
<td><code>true</code></td>
</tr>
<tr>
<td>MaxSidebarPlaylists</td>
<td><code>ND_MAXSIDEBARPLAYLISTS</code></td>
<td>Set the maximum number of playlists shown in the UI&rsquo;s sidebar. Note that a very large number can cause UI performance issues.</td>
<td><code>100</code></td>
</tr>
<tr>
<td>MPVPath</td>
<td><code>ND_MPVPATH</code></td>
<td>Path to <code>mpv</code> executable. Used for <a href="/xuanyu/docs/usage/jukebox/">Jukebox mode</a></td>
<td><em>Empty</em> (search in PATH)</td>
</tr>
<tr>
<td>MPVCmdTemplate</td>
<td><code>ND_MPVCMDTEMPLATE</code></td>
<td>Cmd template used to construct the call of the <code>mpv</code> executable. Used for <a href="/xuanyu/docs/usage/jukebox/#the-mpvcmdtemplate--snapcast-integration">Jukebox mode</a></td>
<td><code>mpv --audio-device=%d --no-audio-display --pause %f --input-ipc-server=%s</code></td>
</tr>
<tr>
<td>PasswordEncryptionKey<a href="/xuanyu/docs/usage/security/#encrypted-passwords">*</a></td>
<td><code>ND_PASSWORDENCRYPTIONKEY</code></td>
<td>Passphrase used to encrypt passwords in the DB. Click <a href="/xuanyu/docs/usage/security/#encrypted-passwords">here</a> for details</td>
<td>-</td>
</tr>
<tr>
<td>PlaylistsPath</td>
<td><code>ND_PLAYLISTSPATH</code></td>
<td>Where to search for and import playlists from. Can be a list of folders/globs (separated by <code>:</code> (or <code>;</code> on Windows). Paths <strong>MUST</strong> be relative to <code>MusicFolder</code></td>
<td><code>&quot;.:**/**&quot;</code> (meaning <code>MusicFolder</code> and all its subfolders)</td>
</tr>
<tr>
<td>PreferSortTags</td>
<td><code>ND_PREFERSORTTAGS</code></td>
<td>Use Sort_* tags to sort columns in the UI.</td>
<td><code>false</code></td>
</tr>
<tr>
<td>Prometheus.Enabled</td>
<td><code>ND_PROMETHEUS_ENABLED</code></td>
<td>Enable extra endpoint with <a href="https://prometheus.io/docs/introduction/overview/">Prometheus</a> metrics.</td>
<td><code>false</code></td>
</tr>
<tr>
<td>Prometheus.MetricsPath</td>
<td><code>ND_PROMETHEUS_METRICSPATH</code></td>
<td>Custom path for Prometheus metrics. Useful for blocking unauthorized metrics requests.</td>
<td><code>&quot;/metrics&quot;</code></td>
</tr>
<tr>
<td>RecentlyAddedByModTime</td>
<td><code>ND_RECENTLYADDEDBYMODTIME</code></td>
<td>Uses music files&rsquo; modification time when sorting by &ldquo;Recently Added&rdquo;. Otherwise use import time</td>
<td><code>false</code></td>
</tr>
<tr>
<td>ReverseProxyUserHeader<a href="/xuanyu/docs/usage/security/#reverse-proxy-authentication">*</a></td>
<td><code>ND_REVERSEPROXYUSERHEADER</code></td>
<td>HTTP header containing user name from authenticated proxy</td>
<td><code>&quot;Remote-User&quot;</code></td>
</tr>
<tr>
<td>ReverseProxyWhitelist<a href="/xuanyu/docs/usage/security/#reverse-proxy-authentication">*</a></td>
<td><code>ND_REVERSEPROXYWHITELIST</code></td>
<td>Comma separated list of IP CIDRs which are allowed to use reverse proxy authentication, empty means &ldquo;deny all&rdquo;</td>
<td><em>Empty</em></td>
</tr>
<tr>
<td>Scanner.Extractor<a href="/xuanyu/docs/usage/extractors/">*</a></td>
<td><code>ND_SCANNER_EXTRACTOR</code></td>
<td>Select metadata extractor implementation. Options: <code>taglib</code> or <code>ffmpeg</code></td>
<td><code>&quot;taglib&quot;</code></td>
</tr>
<tr>
<td>Scanner.GenreSeparators</td>
<td><code>ND_SCANNER_GENRESEPARATORS</code></td>
<td>List of separators to split genre tags</td>
<td><code>&quot;;/,&quot;</code></td>
</tr>
<tr>
<td>Scanner.GroupAlbumReleases</td>
<td><code>ND_SCANNER_GROUPALBUMRELEASES</code></td>
<td>&ldquo;true&rdquo; groups albums with the same Artist + Album Title as one album; &ldquo;false&rdquo; splits re-issues (=different Release Date) into separate albums</td>
<td><code>false</code></td>
</tr>
<tr>
<td>ScanSchedule</td>
<td><code>ND_SCANSCHEDULE</code></td>
<td>Configure periodic scans using <a href="https://crontab.guru">&ldquo;cron&rdquo; syntax</a>. To disable it altogether, set it to <code>&quot;0&quot;</code></td>
<td><code>&quot;@every 1m&quot;</code></td>
</tr>
<tr>
<td>SearchFullString</td>
<td><code>ND_SEARCHFULLSTRING</code></td>
<td>Match query strings anywhere in searchable fields, not only in word boundaries. Useful for languages where words are not space separated</td>
<td><code>false</code></td>
</tr>
<tr>
<td>SessionTimeout</td>
<td><code>ND_SESSIONTIMEOUT</code></td>
<td>How long Navidrome will wait before closing web ui idle sessions</td>
<td><code>&quot;24h&quot;</code></td>
</tr>
<tr>
<td>ShareURL</td>
<td><code>ND_SHAREURL</code></td>
<td>Base URL for shared links. Useful when your server address is not a public (ex: when using Tailscale). See discussion <a href="https://github.com/navidrome/navidrome/discussions/3117">here</a></td>
<td><em>Empty</em> (use server address)</td>
</tr>
<tr>
<td>SmartPlaylistRefreshDelay</td>
<td><code>ND_SMARTPLAYLISTREFRESHDELAY</code></td>
<td>How often to refresh Smart Playlists.</td>
<td><code>&quot;5s&quot;</code></td>
</tr>
<tr>
<td>Spotify.ID<a href="/xuanyu/docs/usage/external-integrations/#spotify">*</a></td>
<td><code>ND_SPOTIFY_ID</code></td>
<td>Spotify Client ID. Required if you want Artist images</td>
<td><em>Empty</em></td>
</tr>
<tr>
<td>Spotify.Secret<a href="/xuanyu/docs/usage/external-integrations/#spotify">*</a></td>
<td><code>ND_SPOTIFY_SECRET</code></td>
<td>Spotify Client Secret. Required if you want Artist images</td>
<td><em>Empty</em></td>
</tr>
<tr>
<td>SubsonicArtistParticipations</td>
<td><code>ND_SUBSONICARTISTPARTICIPATIONS</code></td>
<td>When requesting artist&rsquo;s albums, include albums where the artist participates (ex: Various Artists compilations)</td>
<td><code>false</code></td>
</tr>
<tr>
<td>TLSCert</td>
<td><code>ND_TLSCERT</code></td>
<td>Path for the TLS certificate file, which should include the <a href="https://pkg.go.dev/net/http#Server.ServeTLS">signature chain</a> if any</td>
<td><em>Empty</em> (disable TLS)</td>
</tr>
<tr>
<td>TLSKey</td>
<td><code>ND_TLSKEY</code></td>
<td>Path for the TLS key file</td>
<td><em>Empty</em> (disable TLS)</td>
</tr>
<tr>
<td>TranscodingCacheSize</td>
<td><code>ND_TRANSCODINGCACHESIZE</code></td>
<td>Size of transcoding cache. Set to <code>&quot;0&quot;</code> to disable cache</td>
<td><code>&quot;100MB&quot;</code></td>
</tr>
<tr>
<td>UILoginBackgroundUrl</td>
<td><code>ND_UILOGINBACKGROUNDURL</code></td>
<td>Change background image used in the Login page</td>
<td><em>random music image from Unsplash.com</em></td>
</tr>
<tr>
<td>UIWelcomeMessage</td>
<td><code>ND_UIWELCOMEMESSAGE</code></td>
<td>Add a welcome message to the login screen</td>
<td><em>Empty</em></td>
</tr>
<tr>
<td>UnixSocketPerm</td>
<td><code>ND_UNIXSOCKETPERM</code></td>
<td>Set file permissions for Unix Socket File.<a href="/xuanyu/docs/usage/security/#reverse-proxy-authentication">*</a></td>
<td><code>&quot;0660&quot;</code></td>
</tr>
</tbody>
</table>
<h4 id="notes">Notes</h4>
<ul>
<li>Durations are specified as a number and a unit suffix, such as &ldquo;24h&rdquo;, &ldquo;30s&rdquo; or &ldquo;1h10m&rdquo;. Valid
time units are &ldquo;s&rdquo;, &ldquo;m&rdquo;, &ldquo;h&rdquo;.</li>
<li>Sizes are specified as a number and an optional unit suffix, such as &ldquo;1GB&rdquo; or &ldquo;150 MiB&rdquo;. Default
unit is bytes. Note: &ldquo;1KB&rdquo; == &ldquo;1000&rdquo;, &ldquo;1KiB&rdquo; == &ldquo;1024&rdquo;</li>
<li>Transcoding can be required in some situations. For example: trying to play
a <a href="https://en.wikipedia.org/wiki/Windows_Media_Audio">WMA</a> file in a webbrowser, will <strong>only</strong> work for natively
supported formats by the browser you are using. (so playing that with Mozilla Firefox on Linux, will not work. Mozilla
even has their <a href="https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Audio_codecs">own guide</a> about audio
codecs).</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-36afcf574ea711ce24b9ded084e5cff6">2 - Artwork location resolution</h1>
    <div class="lead">How Navidrome finds artist and cover art images</div>
	<h2 id="artists">Artists</h2>
<p>Fetching images for artists is controlled by the <code>ArtistArtPriority</code> <a href="/xuanyu/docs/usage/configuration-options/#advanced-configuration">config option</a>.
This is a comma-separated list of places to look for artist images.
The default is <code>artist.*, album/artist.*, external</code>, meaning:</p>
<ul>
<li>First try to find an <code>artist.*</code> image in the artist folder(s)</li>
<li>If not found, try to find an <code>artist.*</code> image in one of the album folders for this artist</li>
<li>If not found, try to fetch it from an <a href="/xuanyu/docs/usage/external-integrations/">external service</a> (currently only Spotify)</li>
<li>If not found, use the artist image placeholder (grey star image)</li>
</ul>
<h2 id="albums">Albums</h2>
<p>CoverArt fetching for albums is controlled by the <code>CoverArtPriority</code> <a href="/xuanyu/docs/usage/configuration-options/#advanced-configuration">config option</a>.
This is a comma-separated list of places to look for album art images.
The default is <code>cover.*, folder.*, front.*, embedded, external</code>, meaning:</p>
<ul>
<li>First try to find a <code>cover.*</code>, <code>folder.*</code> or <code>front.*</code> image in the album folder(s)</li>
<li>If not found, try to read an embedded image from one of the mediafiles for that album</li>
<li>If not found, try to fetch it from an <a href="/xuanyu/docs/usage/external-integrations/">external service</a> (currently only Last.fm)</li>
<li>If not found, use the cover placeholder (blue record image)</li>
</ul>
<h2 id="mediafiles">MediaFiles</h2>
<p>Some players (including Navidrome&rsquo;s own WebUI), can display different cover art images for each track in an album.
Navidrome tries to read an embedded image from the mediafile. If it does not have one, it will get the album cover
art as explained above. MediaFile cover art can be slow in some systems and can be disabled by
setting <code>EnableMediaFileCoverArt=false</code>.</p>
<h2 id="playlists">Playlists</h2>
<p>Currently, Playlists CoverArt images are generated tiled images, containing up to 4 covers from the albums in the playlist.
If for any reason it cannot be generated, it will use the album cover placeholder (blue record image). This is currently only available in the Subsonic API.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-cc434e92e48e7fd7a9073a1b6d51c76d">3 - External Integrations</h1>
    <div class="lead">Configure Navidrome to get information and images from Last.fm and Spotify</div>
	<h2 id="lastfm">Last.fm</h2>
<p>Navidrome can use Last.fm to retrieve artists biographies, top songs, similar artists and album covers. It can also
send your scrobbles to Last.fm. For these features to work, you&rsquo;ll need to set the
<a href="/xuanyu/docs/usage/configuration-options/#:~:text=(auto detect)-,LastFM.ApiKey,-ND_LASTFM_APIKEY">config options</a>
<code>LastFM.ApiKey</code> and <code>LastFM.Secret</code>. You can obtain these values by creating a free API account in Last.fm:</p>
<ol>
<li>Go to <a href="https://www.last.fm/api/account/create">https://www.last.fm/api/account/create</a> and create an API account. Only the <em>Application Name</em> field is mandatory:</li>
</ol>
<p align="center">
<img width="500" src="/screenshots/lastfm-create-account.png">
</p>
<ol start="2">
<li>After submitting the form, you can get the <em>API Key</em> and <em>Shared Secret</em> from the <em>Account Created</em> page:</li>
</ol>
<p align="center">
<img width="500" src="/screenshots/lastfm-account-created.png">
</p>
<ol start="3">
<li>Copy the values above to your <a href="/xuanyu/docs/usage/configuration-options/#configuration-file">configuration file</a> as <code>LastFM.ApiKey</code> and <code>LastFM.Secret</code> (or set them as environment variables <code>ND_LASTFM_APIKEY</code> and <code>ND_LASTFM_SECRET</code>)</li>
</ol>
<h2 id="spotify">Spotify</h2>
<p>Artist images can be retrieved from Spotify. You&rsquo;ll need to set the config options <code>Spotify.ID</code> and <code>Spotify.Secret</code>.
To obtain these values, create a free account in Spotify, then follow these steps:</p>
<ol>
<li>Click on the &ldquo;Create app&rdquo; button in Spotify&rsquo;s Developer dashboard: <a href="https://developer.spotify.com/dashboard/applications">https://developer.spotify.com/dashboard/applications</a>:</li>
</ol>
<p align="center">
<img width="500" src="/screenshots/spotify-dashboard.png">
</p>
<ol start="2">
<li>Fill the name and description fields, fill the &ldquo;Redirect URI&rdquo; field with <code>http://localhost/</code> and click on the &ldquo;Save&rdquo; button:</li>
</ol>
<p align="center">
<img width="500" src="/screenshots/spotify-create-app.png">
</p>
<ol start="3">
<li>Go to &ldquo;Settings&rdquo;:</li>
</ol>
<p align="center">
<img width="500" src="/screenshots/spotify-app-home.png">
</p>
<ol start="4">
<li>Click &ldquo;View client secret&rdquo;:</li>
</ol>
<p align="center">
<img width="500" src="/screenshots/spotify-app-basic-info.png">
</p>
<ol start="5">
<li>Copy the values of ID and secret to your <a href="/xuanyu/docs/usage/configuration-options/#configuration-file">configuration file</a> as <code>Spotify.ID</code> and <code>Spotify.Secret</code> (or set them as environment variables <code>ND_SPOTIFY_ID</code> and <code>ND_SPOTIFY_SECRET</code>):</li>
</ol>
<p align="center">
<img width="500" src="/screenshots/spotify-app-basic-info-secret.png">
</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-5308194cccb21f64d0bbf925160cc6e3">4 - Sharing</h1>
    <div class="lead">How to create links to your media to be shared on Facebook, X, WhatsApp</div>
	

<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">NOTE</h4>

    Please be aware that the Sharing feature is still under active development, and improvements to functionality and security are expected in future updates. Please report any issues or suggestions to the Navidrome GitHub issues page.

</div>

<p>Navidrome has a &ldquo;Sharing&rdquo; feature which allows users to generate a shareable link for a track, album, artist, or playlist. This link can then be sent to friends, allowing them to listen or download the music without having an account on your Navidrome instance.</p>
<h3 id="enabling-the-sharing-feature">Enabling the Sharing Feature</h3>
<p>As of version 0.49.3, the Sharing feature is disabled by default. To enable it, you need to adjust your Navidrome
<a href="/xuanyu/docs/usage/configuration-options/">configuration</a>. In your configuration file, set <code>EnableSharing=true</code>, or set the
environment variable <code>ND_ENABLESHARING=true</code>.</p>
<p>Once the Sharing feature is enabled, all users will have access to all existing shares. This includes the ability to change the description and expiration date of the shares, as well as the capability to create new shares.</p>
<p>Please note that at this time, there is no way to set specific sharing permissions per user. This means that once the Sharing feature is enabled, all users have equal access and capabilities related to sharing. This includes the ability to view, modify, and create shares.</p>
<p>Due to this, we advise you to enable this feature only if you are comfortable with these permissions. Future updates may include more granular permission controls for sharing.</p>
<h3 id="using-the-sharing-feature">Using the Sharing Feature</h3>
<p>Once the Sharing feature is enabled, all users will be able to access current shares, modify descriptions and expiration, and create new ones. However, as of the initial implementation, there is currently no way to set permissions per user.</p>
<p>When browsing your music collection, you will notice a &ldquo;Share&rdquo; button or menu item available for each item, be it a track, album, artist, or playlist. To share an item, simply click on this &ldquo;Share&rdquo; button.</p>
<p>Upon clicking the &ldquo;Share&rdquo; button, a dialog box will appear, allowing you to configure your share. This includes setting a description other configurations for the share.</p>
<p align="center">
<img width="400" src="/screenshots/share-dialog.png">
</p>
<p>Once you have configured your share as desired, click the &ldquo;Share&rdquo; button. This will generate a unique shareable link, which you can then copy and share with your friends.</p>
<p>The generated sharable links will be in the following format: <code>http://yourserver.com/share/XXXXXXXXXX</code>. If you have Navidrome behind a reverse proxy, ensure you allow traffic to <code>/share</code>.</p>
<h3 id="subsonic-api-endpoints">Subsonic API Endpoints</h3>
<p>The Sharing feature also implements the related Subsonic API endpoints.
See the <a href="https://opensubsonic.netlify.app/categories/sharing/" target="_blank">API docs for implemented endpoints</a></p>
<h3 id="meta-tags-to-html">Meta-tags to HTML</h3>
<p>Meta-tags are added to the HTML to provide some information about the shared music on chat platforms. Example of a link shared in Discord:</p>
<p align="center">
<img width="400" src="/screenshots/share-meta.png">
</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6d888317d8891e9ba024283a583e0468">5 - Monitoring Navidrome</h1>
    <div class="lead">How to monitor status of your Navidrome instance</div>
	<p>Currently, Navidrome supports monitoring and alerting using
Prometheus/<a href="https://github.com/OpenObservability/OpenMetrics/blob/main/specification/OpenMetrics.md">OpenMetrics</a>
standard. Example Grafana dashboard:</p>
<p align="center">
<img width="1000" src="/screenshots/grafana-example.png">
</p>
<h3 id="overview">Overview</h3>
<p>Prometheus is a service that takes data from a metrics endpoint and collects it.
Grafana is a dashboard service that can take data from a Prometheus server and
display it.
Navidrome has an easy way to create a metrics endpoint that Prometheus can use.
Once you point Prometheus to this endpoint, and Grafana to your Prometheus server,
you will be able to monitor your Navidrome instance.</p>
<p>The easiest way to do this is using docker-compose and Docker networks.</p>
<h3 id="configuration">Configuration</h3>
<p>You need to set <code>ND_PROMETHEUS_ENABLED</code> to enable Prometheus metrics endpoint.
Setting custom <code>ND_PROMETHEUS_METRICSPATH</code> is highly recommended if your Navidrome
instance is publicly available.</p>
<p>Minimal docker compose example file with metrics enabled, and Prometheus and Grafana
containers:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">version</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;3&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">services</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">navidrome</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">deluan/navidrome</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">user</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1000</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">1000</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># should be owner of volumes</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">ports</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#4e9a06">&#34;4533:4533&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">environment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">ND_PROMETHEUS_ENABLED</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;true&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">ND_PROMETHEUS_METRICSPATH</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;/metrics_SOME_SECRET_KEY&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#4e9a06">&#34;./data:/data&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#4e9a06">&#34;./music:/music&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">networks</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">metrics-network</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">prometheus</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">prom/prometheus</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">container_name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">prometheus</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">command</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#4e9a06">&#39;--config.file=/prometheus/prometheus.yml&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">ports</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#0000cf;font-weight:bold">9090</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">9090</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">restart</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">unless-stopped</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">./etc/prometheus:/etc/prometheus</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">./prometheus:/prometheus</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">networks</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">metrics-network</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">grafana</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">grafana/grafana</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">container_name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">grafana</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">ports</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#0000cf;font-weight:bold">3000</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">3000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">restart</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">unless-stopped</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">environment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">GF_SERVER_ROOT_URL=&lt;your external grafana endpoint here&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">GF_SERVER_SERVE_FROM_SUB_PATH=false</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># if your external grafana endpoint has a subpath or not</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">./etc/grafana:/etc/grafana/provisioning/datasources</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">networks</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">metrics-network</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">networks</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">metrics-network</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">driver</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">bridge</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Example <code>prometheus.yml</code> config to parse this instance:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">global</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">scrape_interval</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">scrape_configs</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">job_name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;navidrome&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">metrics_path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/metrics_SOME_SECRET_KEY</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">scheme</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">http</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">static_configs</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">targets</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;navidrome:4533&#39;</span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="dashboard">Dashboard</h3>
<p>Grafana dashboard available here: <a href="https://grafana.com/grafana/dashboards/18038-navidrome/">#18038</a>.</p>
<p>Simple to install but fully fledged Grafana docker compose configuration
can be found <a href="https://github.com/Einsteinish/Docker-Compose-Prometheus-and-Grafana">here</a>.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6638163e10c0e4124f33547c097c90d7">6 - Jukebox mode</h1>
    <div class="lead">Activate Navidrome&rsquo;s Jukebox mode</div>
	<h2 id="introduction">Introduction</h2>
<p>Navidrome&rsquo;s Jukebox feature is a built-in functionality that allows users to play music directly to the server&rsquo;s audio
hardware. This essentially turns your server into a jukebox, enabling you to play songs or playlists remotely through a
supported Subsonic client. With the Jukebox feature, you can control the audio playback in real-time, just like you
would with any other media player. It&rsquo;s a convenient way to enjoy your music collection without the need for
additional hardware or software. Ideal for parties, background music, or personal enjoyment, this feature enhances
the versatility of your Navidrome server setup.</p>
<p>Navidrome&rsquo;s Jukebox mode is based on the OpenSource audio player <a href="https://mpv.io/">MPV</a>. MPV is a mature and tested
audio/videoplayer that is supported on many platforms. Navidrome&rsquo;s Jukebox mode uses MPV for audio playback in
combination with MPV&rsquo;s feature to be controlled through <a href="https://mpv.io/manual/master/#json-ipc">IPC</a>.</p>
<h2 id="mpv-installation">MPV Installation</h2>
<p>MPV must be present on the system where the Navidrome server runs. You might find it already installed or could install
it yourself using the methods given on the MPV&rsquo;s <a href="https://mpv.io/installation/">installation page</a>.</p>
<p>The minimal requirement is the IPC support. MPV added IPC support with version 0.7.0 for Linux and macOS and added
Windows support with version 0.17.0. Your OS will most probably include newer versions (0.3X) which we recommend.
After the installation check the version with:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ mpv --version
</span></span></code></pre></div><p>Jukebox mode will use the MPV audio device naming scheme for its configuration. To get an overview about the available
audio devices on the system do:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ mpv --audio-device<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">help</span>
</span></span></code></pre></div><p>Here is an example on macOS:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>List of detected audio devices:
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#39;auto&#39;</span> <span style="color:#ce5c00;font-weight:bold">(</span>Autoselect device<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#39;coreaudio/AppleGFXHDAEngineOutputDP:10001:0:{D109-7950-00005445}&#39;</span> <span style="color:#ce5c00;font-weight:bold">(</span>BenQ EW3270U<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#39;coreaudio/AppleUSBAudioEngine:Cambridge Audio :Cambridge Audio USB Audio 1.0:0000:1&#39;</span> <span style="color:#ce5c00;font-weight:bold">(</span>Cambridge Audio USB 1.0 Audio Out<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#39;coreaudio/BuiltInSpeakerDevice&#39;</span> <span style="color:#ce5c00;font-weight:bold">(</span>MacBook Pro-Lautsprecher<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span></code></pre></div><p>or on Linux:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>List of detected audio devices:
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#39;auto&#39;</span> <span style="color:#ce5c00;font-weight:bold">(</span>Autoselect device<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#39;alsa&#39;</span> <span style="color:#ce5c00;font-weight:bold">(</span>Default <span style="color:#ce5c00;font-weight:bold">(</span>alsa<span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#39;alsa/jack&#39;</span> <span style="color:#ce5c00;font-weight:bold">(</span>JACK Audio Connection Kit<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#39;alsa/default:CARD=Headphones&#39;</span> <span style="color:#ce5c00;font-weight:bold">(</span>bcm2835 Headphones, bcm2835 Headphones/Default Audio Device<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#39;jack&#39;</span> <span style="color:#ce5c00;font-weight:bold">(</span>Default <span style="color:#ce5c00;font-weight:bold">(</span>jack<span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#39;sdl&#39;</span> <span style="color:#ce5c00;font-weight:bold">(</span>Default <span style="color:#ce5c00;font-weight:bold">(</span>sdl<span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#39;sndio&#39;</span> <span style="color:#ce5c00;font-weight:bold">(</span>Default <span style="color:#ce5c00;font-weight:bold">(</span>sndio<span style="color:#ce5c00;font-weight:bold">))</span>
</span></span></code></pre></div><p>Please use the full device name <strong>if you do not want to use MPV&rsquo;s auto device</strong>. For example on macOS:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#4e9a06">&#34;coreaudio/AppleUSBAudioEngine:Cambridge Audio :Cambridge Audio USB Audio 1.0:0000:1&#34;</span>
</span></span></code></pre></div><h2 id="configuration">Configuration</h2>
<p>Jukebox mode is enabled by setting this option in your <a href="/xuanyu/docs/usage/configuration-options/">configuration file</a>
(normally <code>navidrome.toml</code>):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#000">Jukebox</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Enabled</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">true</span>
</span></span></code></pre></div><p>In most cases, this should be the only config option needed.</p>
<p>The MPV binary should be found automatically on the path. In case this does not work use this configuration option:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#000">MPVPath</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;/path/to/mpv&#34;</span>
</span></span></code></pre></div><p>Jukebox mode will use MPV&rsquo;s <strong>auto</strong> device for playback if no device is given.</p>
<p>One can supply an array of multiple devices under <code>Jukebox.Devices</code> (note: this config option cannot be set as an environment variable):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#000">Jukebox</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Devices</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic"># &#34;symbolic name &#34; &#34;device&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">[</span> <span style="color:#4e9a06">&#34;internal&#34;</span><span style="color:#000;font-weight:bold">,</span>     <span style="color:#4e9a06">&#34;coreaudio/BuiltInSpeakerDevice&#34;</span> <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">[</span> <span style="color:#4e9a06">&#34;dac&#34;</span><span style="color:#000;font-weight:bold">,</span>          <span style="color:#4e9a06">&#34;coreaudio/AppleUSBAudioEngine:Cambridge Audio :Cambridge Audio USB Audio 1.0:0000:1&#34;</span> <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">]</span>
</span></span></code></pre></div><p>and select one by using <code>Jukebox.Default</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#000">Jukebox</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;dac&#34;</span>
</span></span></code></pre></div><p>Here is one example configuration:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Enable/Disable Jukebox mode</span>
</span></span><span style="display:flex;"><span><span style="color:#000">Jukebox</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Enabled</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># List of registered devices, syntax:</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#  &#34;symbolic name &#34; - Symbolic name to be used in UI&#39;s</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#  &#34;device&#34; - MPV audio device name, do mpv --audio-device=help to get a list</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">Jukebox</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Devices</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic"># &#34;symbolic name &#34; &#34;device&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">[</span> <span style="color:#4e9a06">&#34;internal&#34;</span><span style="color:#000;font-weight:bold">,</span>     <span style="color:#4e9a06">&#34;coreaudio/BuiltInSpeakerDevice&#34;</span> <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">[</span> <span style="color:#4e9a06">&#34;dac&#34;</span><span style="color:#000;font-weight:bold">,</span>          <span style="color:#4e9a06">&#34;coreaudio/AppleUSBAudioEngine:Cambridge Audio :Cambridge Audio USB Audio 1.0:0000:1&#34;</span> <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Device to use for Jukebox mode, if there are multiple entries above.</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Using device &#34;auto&#34; if missing</span>
</span></span><span style="display:flex;"><span><span style="color:#000">Jukebox</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Default</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;dac&#34;</span>
</span></span></code></pre></div><h3 id="the-mpvcmdtemplate--snapcast-integration">The <code>MPVCmdTemplate</code> / Snapcast integration</h3>
<p>There might be cases, where you want to control the call of the <code>mpv</code> binary. Noteable mentions would be the integration with Snapcast
for multi room audio. You can use the <code>MPVCmdTemplate</code> for this.</p>
<p>The default value is <code>mpv --audio-device=%d --no-audio-display --pause %f --input-ipc-server=%s</code>.</p>
<table>
<thead>
<tr>
<th>Symbol</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%s</code></td>
<td>Path to IPC server socket</td>
</tr>
<tr>
<td><code>%d</code></td>
<td>Audio device (see above)</td>
</tr>
<tr>
<td><code>%f</code></td>
<td>Path to file to play</td>
</tr>
</tbody>
</table>
<p>To integrate with Snapcast alter the template:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#000">MPVCmdTemplate</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;mpv --no-audio-display --pause %f --input-ipc-server=%s --audio-channels=stereo --audio-samplerate=48000 --audio-format=s16 --ao=pcm --ao-pcm-file=/tmp/snapfifo&#34;</span>
</span></span></code></pre></div><p>This assumes Snapcast is running on the same machine as Navidrome. Check the <a href="https://github.com/badaix/snapcast/blob/develop/doc/player_setup.md#mpv">Snapcast documentation</a> for details.</p>
<h2 id="usage">Usage</h2>
<p>Once Jukebox mode is enabled and configured, to start playing music through your servers speakers you&rsquo;ll need to download a third-party
<a href="https://www.subsonic.org/pages/apps.jsp">Subsonic client</a>. This client acts as a remote control.
Not all Subsonic clients support Jukebox mode and you&rsquo;ll need to check that your client supports this feature.</p>
<p>Jukebox mode is currently not supported through the Navidrome Web UI.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>If Jukebox mode is enabled one should see the message &ldquo;<strong>Starting playback server</strong>&rdquo; in the log. The number of detected audio devices and the device chosen will be given in the log as well:</p>
<pre tabindex="0"><code class="language-log" data-lang="log">INFO[0000] Starting playback server
INFO[0000] 4 audio devices found
INFO[0000] Using default audio device: dac
</code></pre><p>For further troubleshooting, set Navidrome&rsquo;s loglevel to DEBUG:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#000">LogLevel</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;DEBUG&#39;</span>
</span></span></code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ee00a05be038cb0ea8b5956df19aa915">7 - Metadata Extractors</h1>
    <div class="lead">Information on the music metadata extractors used during scanning</div>
	<h2 id="music-metadata">Music metadata</h2>
<p>Music metadata is derived from audio files via one of the two Extractors for the Scanner:</p>
<ul>
<li><a href="https://taglib.org">TagLib</a></li>
<li><a href="https://ffmpeg.org">ffmpeg</a></li>
</ul>
<p>The extractor used for scanning can be configured via <a href="/xuanyu/docs/usage/configuration-options/#advanced-configuration">configuration options</a> using <code>Scanner.Extractor</code>.</p>
<h2 id="taglib">TagLib</h2>
<p><a href="https://taglib.org">TagLib</a> is the default extractor. It is faster at extracting but does not support as many file formats/audio coding formats as ffmpeg.</p>
<h2 id="ffmpeg">Ffmpeg</h2>
<p>You may want to try <a href="https://ffmpeg.org">ffmpeg</a> for extracting if you have files in your collection that are not supported by <a href="https://taglib.org">TagLib - see their official documentation for information on what is supported</a>.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0ae36053267aa4fa38e12a6540f071f1">8 - Security Considerations</h1>
    <div class="lead">Information on how to making your installation more secure</div>
	<h2 id="permissions">Permissions</h2>
<p><strong>You should NOT run Navidrome as <code>root</code></strong>. Ideally you should have it running under its own user. Navidrome only
needs read-only access to the Music Folder, and read-write permissions to the Data Folder.</p>
<h2 id="encrypted-passwords">Encrypted passwords</h2>
<p>To be able to keep compatibility with the Subsonic API and its clients, Navidrome needs to store user&rsquo;s passwords in its database. By default, Navidrome
encrypts the passwords in the DB with a shared encryption key, just for the sake of obfuscation as this key can be easily found in the codebase.</p>
<p>This key can be overridden by the config option <code>PasswordEncryptionKey</code>. Once this option is set and Navidrome is restarted, it will re-encrypt all passwords with this new key. This is a one-time only configuration, and after this point the config option cannot be changed anymore or else users won&rsquo;t be able to authenticate.</p>
<h2 id="network-configuration">Network configuration</h2>
<p>Even though Navidrome comes with an embedded, full-featured HTTP server, you should seriously consider running it
behind a reverse proxy (Ex: Caddy, Nginx, Traefik, Apache) for added security, including setting up SSL.
There are tons of good resources on the web on how to properly setup a reverse proxy.</p>
<p>When using Navidrome in such configuration, you may want to prevent Navidrome from listening to all IPs configured
in your computer, and only listen to <code>localhost</code>. This can be achieved by setting the <code>Address</code> flag to <code>localhost</code></p>
<h2 id="reverse-proxy-authentication">Reverse proxy authentication</h2>
<p>When reverse proxy authentication is used, the verification is done by another system. By checking a specific HTTP header,
Navidrome assumes you are already authenticated. This header can be configured via <code>ReverseProxyUserHeader</code> configuration
option. By default, the <code>Remote-User</code> header is used.</p>
<p>By default, Navidrome denies every attempt. Authentication proxy needs to be whitelisted in CIDR format, using
<code>ReverseProxyWhitelist</code>. Both IPv4 and IPv6 are supported.</p>
<p><strong>NOTE</strong>: if you are listening on a UNIX socket, Navidrome will allow any connection to authenticate, as there is no
remote IP exposed. Make sure to properly protect the socket with user access controls.</p>
<p>If you enable this feature and use a Subsonic client, you must whitelist the Subsonic API URL, as this authentication
method is incompatible with the Subsonic authentication. You will need to whitelist the <code>/rest/*</code> URLs.</p>
<p>If a user is successfully authenticated by the proxy, but it does not exist in the Navidrome DB, it will be created with
a random password. The user can change this password if they plan to use a Subsonic client.</p>
<p>If you plan to use the Sharing option, where you can create unauthenticated links to parts of your library, you&rsquo;ll
need to whitelist <code>/share/*</code> URLs.</p>
<h2 id="transcoding-configuration">Transcoding configuration</h2>
<p>To configure transcoding, Navidrome&rsquo;s WebUI provide a screen that allows you to edit existing
transcoding configurations and to add new ones. That is similar to other music servers available
in the market that provide transcoding on-demand.</p>
<p>The issue with this is that it potentially allows an attacker to run any command in your server.
This married with the fact that some Navidrome installations don&rsquo;t use SSL and/or run it as a
super-user (<em>root</em> or <em>Administrator</em>), is a recipe for disaster!</p>
<p>In an effort to make Navidrome as secure as possible, we decided to disable the transcoding
configuration editing in the UI by default. If you need to edit it (add or change a configuration),
start Navidrome with the <code>ND_ENABLETRANSCODINGCONFIG</code> set to <code>true</code>. After doing your changes,
don&rsquo;t forget to remove this option or set it to <code>false</code>.</p>
<h2 id="limit-login-attempts">Limit login attempts</h2>
<p>To protect against brute-force attacks, Navidrome is configured by default with a login rate limiter,
It uses a <a href="https://blog.cloudflare.com/counting-things-a-lot-of-different-things/#slidingwindowstotherescue">Sliding Window</a>
algorithm to block too many consecutive login attempts. It is enabled by default and you don&rsquo;t need to do anything.
The rate limiter can be fine tuned using the flags <code>AuthRequestLimit</code> and <code>AuthWindowLength</code> and can be disabled by
setting <code>AuthRequestLimit</code> to <code>0</code>, though it is not recommended.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-294f17907a2250dcd109d8c7b7ceed5f">9 - Troubleshooting</h1>
    <div class="lead">Solutions for common issues</div>
	<h2 id="album-cover-art-is-not-showing-up">Album cover art is not showing up</h2>
<p><strong>This issue was fixed in version 0.15.0, please upgrade!</strong></p>
<p>You don&rsquo;t see any artwork in Navidrome&rsquo;s UI and in any Subsonic clients, and you are getting errors
in the logs like this:</p>
<pre tabindex="0"><code> panic: runtime error: invalid memory address or nil pointer dereference

 -&gt; github.com/djherbis/fscache.(*handleCounter).inc
 -&gt;   /go/pkg/mod/github.com/djherbis/fscache@v0.10.0/fscache.go:327

    github.com/djherbis/fscache.(*FSCache).newFile
      /go/pkg/mod/github.com/djherbis/fscache@v0.10.0/fscache.go:227
    github.com/djherbis/fscache.(*FSCache).Get
      /go/pkg/mod/github.com/djherbis/fscache@v0.10.0/fscache.go:154
    github.com/navidrome/navidrome/engine.(*cover).Get
      /github/workspace/engine/cover.go:50
</code></pre><p>This is being caused by a <a href="https://github.com/navidrome/navidrome/issues/177">bug</a>, and we are already
working on a fix for it. In the meantime, you can fix the issue by disabling Navidrome&rsquo;s image cache.</p>
<p>To solve this, simply set <code>ND_IMAGECACHESIZE=0</code> in your <a href="/xuanyu/docs/usage/configuration-options/">configuration</a>
and restart Navidrome. You should see the warning message <code>Image cache disabled</code> during startup,
confirming the configuration was effective. You should now be able to see the album cover arts.</p>
<p><strong>Note:</strong> This option is only available in Navidrome version 0.14.4 and above.</p>

</div>



    
	
  



          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        
      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/xuanyu/js/main.js"></script>
<script defer src="/xuanyu/js/click-to-copy.js" crossorigin="anonymous"></script>
<script src='/xuanyu/js/tabpane-persist.js'></script>

  </body>
</html>
